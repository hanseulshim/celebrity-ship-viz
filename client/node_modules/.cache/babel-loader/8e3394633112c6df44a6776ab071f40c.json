{"ast":null,"code":"import _slicedToArray from\"/Users/hanseulshim/Projects/celebrity-ship-viz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/hanseulshim/Projects/celebrity-ship-viz/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  background-color: \",\";\\n  color: \",\";\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState,useContext}from'react';import{store}from'context/store';import{useQuery}from'@apollo/client';import{GET_SUB_FILTERS}from'graphql/queries';import styled from'styled-components';import Button from'components/common/Button';import Icon from'components/common/Icon';import Loader from'components/common/Loader';import Notification from'components/common/Notification';import PeerDropdownMenu from'./PeerDropdownMenu';import{StyledModal}from'components/common/StyledComponents';var OpenModal=styled(Button)(_templateObject(),function(props){return props.theme.babyBlue;},function(props){return props.theme.black;});var PeerSubFilters=function PeerSubFilters(){var globalState=useContext(store);var state=globalState.state,dispatch=globalState.dispatch;var peerFilter=state.peerFilter,filterCount=state.filterCount;var _useQuery=useQuery(GET_SUB_FILTERS,{fetchPolicy:'network-only',onCompleted:function onCompleted(data){Object.keys(data.filter).filter(function(v){return v!=='__typename'&&v!=='cabinCategoryClass';}).forEach(function(subFilter){var arr=data.filter[subFilter].map(function(v){return{id:v.id,value:v.value};});dispatch({type:'setSelectedPeerSubFilter',title:subFilter,value:arr});dispatch({type:'setSelectedSubFilterCount',title:subFilter,value:arr.length});});}}),loading=_useQuery.loading,error=_useQuery.error,data=_useQuery.data;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible=_useState2[0],setVisible=_useState2[1];var openModal=function openModal(){setVisible(true);};var handleApply=function handleApply(){setVisible(false);};var handleCancel=function handleCancel(){setVisible(false);};if(loading)return React.createElement(Loader,null);if(error)return React.createElement(Notification,{type:\"error\",message:error.message});return React.createElement(React.Fragment,null,React.createElement(OpenModal,{onClick:function onClick(){return openModal();}},Object.keys(peerFilter).filter(function(key){return peerFilter[key].length!==filterCount[key];}).length,' ',\"Filters \",React.createElement(Icon,{icon:\"edit\"})),React.createElement(StyledModal,{title:\"Peer Group Filters\",visible:visible,onOk:handleApply,onCancel:handleCancel,okText:\"Apply\",footer:null},Object.keys(data.filter).filter(function(v){return v!=='__typename'&&v!=='cabinCategoryClass';}).map(function(subFilter,i){var options=data.filter[subFilter];return React.createElement(PeerDropdownMenu,{options:options,title:subFilter,key:subFilter+i,displayKey:'value'});})));};export default PeerSubFilters;","map":{"version":3,"sources":["/Users/hanseulshim/Projects/celebrity-ship-viz/src/components/main/filters/peer-group-filters/PeerSubFilters.js"],"names":["React","useState","useContext","store","useQuery","GET_SUB_FILTERS","styled","Button","Icon","Loader","Notification","PeerDropdownMenu","StyledModal","OpenModal","props","theme","babyBlue","black","PeerSubFilters","globalState","state","dispatch","peerFilter","filterCount","fetchPolicy","onCompleted","data","Object","keys","filter","v","forEach","subFilter","arr","map","id","value","type","title","length","loading","error","visible","setVisible","openModal","handleApply","handleCancel","message","key","i","options"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react'\nimport { store } from 'context/store'\nimport { useQuery } from '@apollo/client'\nimport { GET_SUB_FILTERS } from 'graphql/queries'\nimport styled from 'styled-components'\nimport Button from 'components/common/Button'\nimport Icon from 'components/common/Icon'\nimport Loader from 'components/common/Loader'\nimport Notification from 'components/common/Notification'\nimport PeerDropdownMenu from './PeerDropdownMenu'\nimport { StyledModal } from 'components/common/StyledComponents'\n\nconst OpenModal = styled(Button)`\n  background-color: ${props => props.theme.babyBlue};\n  color: ${props => props.theme.black};\n`\n\nconst PeerSubFilters = () => {\n  const globalState = useContext(store)\n  const { state, dispatch } = globalState\n  const { peerFilter, filterCount } = state\n  const { loading, error, data } = useQuery(GET_SUB_FILTERS, {\n    fetchPolicy: 'network-only',\n    onCompleted: data => {\n      Object.keys(data.filter)\n        .filter(v => v !== '__typename' && v !== 'cabinCategoryClass')\n        .forEach(subFilter => {\n          const arr = data.filter[subFilter].map(v => ({\n            id: v.id,\n            value: v.value\n          }))\n          dispatch({\n            type: 'setSelectedPeerSubFilter',\n            title: subFilter,\n            value: arr\n          })\n          dispatch({\n            type: 'setSelectedSubFilterCount',\n            title: subFilter,\n            value: arr.length\n          })\n        })\n    }\n  })\n\n  const [visible, setVisible] = useState(false)\n\n  const openModal = () => {\n    setVisible(true)\n  }\n\n  const handleApply = () => {\n    setVisible(false)\n  }\n\n  const handleCancel = () => {\n    setVisible(false)\n  }\n\n  if (loading) return <Loader />\n  if (error) return <Notification type=\"error\" message={error.message} />\n  return (\n    <>\n      <OpenModal onClick={() => openModal()}>\n        {\n          Object.keys(peerFilter).filter(key => {\n            return peerFilter[key].length !== filterCount[key]\n          }).length\n        }{' '}\n        Filters <Icon icon=\"edit\" />\n      </OpenModal>\n      <StyledModal\n        title=\"Peer Group Filters\"\n        visible={visible}\n        onOk={handleApply}\n        onCancel={handleCancel}\n        okText=\"Apply\"\n        footer={null}\n      >\n        {Object.keys(data.filter)\n          .filter(v => v !== '__typename' && v !== 'cabinCategoryClass')\n          .map((subFilter, i) => {\n            const options = data.filter[subFilter]\n            return (\n              <PeerDropdownMenu\n                options={options}\n                title={subFilter}\n                key={subFilter + i}\n                displayKey={'value'}\n              />\n            )\n          })}\n      </StyledModal>\n    </>\n  )\n}\n\nexport default PeerSubFilters\n"]},"metadata":{},"sourceType":"module"}