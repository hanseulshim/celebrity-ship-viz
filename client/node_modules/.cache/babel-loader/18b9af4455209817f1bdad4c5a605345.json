{"ast":null,"code":"import _slicedToArray from\"/Users/hanseulshim/Projects/celebrity-ship-viz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/hanseulshim/Projects/celebrity-ship-viz/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  left: 0;\\n  height: 100%;\\n  border-radius: 3px;\\n  width: \",\";\\n  background-color: \",\";\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  position: relative;\\n  width: 90%;\\n  height: 10px;\\n  border-radius: 3px;\\n  background-color: \",\";\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  font-size: 2em;\\n\\n  > svg {\\n    color: \",\";\\n    cursor: pointer;\\n  }\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  flex: 3;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-around;\\n  align-items: center;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useContext,useEffect}from'react';import{useQuery,useLazyQuery}from'@apollo/client';import{store}from'context/store';import styled from'styled-components';import{Select,Icon}from'antd';import{StyledSelect}from'components/common/StyledComponents';// GQL\nimport{GET_SNAPSHOT_INTERVAL_LIST,GET_VISUAL_DECK_LIST}from'graphql/queries';import{getFilterVariables}from'helper';// Project Imports\nimport Loader from'components/common/Loader';import Notification from'components/common/Notification';var Option=Select.Option;var Container=styled.div(_templateObject());var ChangeInterval=styled.div(_templateObject2());var StyledIcon=styled(Icon)(_templateObject3(),function(props){return props.theme.babyBlue;});var IntervalMeter=styled.div(_templateObject4(),function(props){return props.theme.dusk;});var IntervalPosition=styled.div(_templateObject5(),function(props){return props.width;},function(props){return props.theme.babyBlue;});var Timeline=function Timeline(){var globalState=useContext(store);var state=globalState.state,dispatch=globalState.dispatch;var selectedShip=state.selectedShip,selectedProduct=state.selectedProduct,selectedItinerary=state.selectedItinerary,selectedSailDate=state.selectedSailDate,selectedBookingWeek=state.selectedBookingWeek,peerGroupFilters=state.peerGroupFilters,selectedPeerShip=state.selectedPeerShip,selectedPeerProduct=state.selectedPeerProduct,selectedPeerSailingDates=state.selectedPeerSailingDates,filter=state.filter,peerFilter=state.peerFilter,filterCount=state.filterCount,shipData=state.shipData;var _useQuery=useQuery(GET_SNAPSHOT_INTERVAL_LIST,{fetchPolicy:'network-only'}),loading=_useQuery.loading,error=_useQuery.error,data=_useQuery.data;var _useLazyQuery=useLazyQuery(GET_VISUAL_DECK_LIST,{onCompleted:function onCompleted(data){dispatch({type:'setShipData',value:data.deckVisualList});},fetchPolicy:'network-only'}),_useLazyQuery2=_slicedToArray(_useLazyQuery,1),applyFilters=_useLazyQuery2[0];var handleSelect=function handleSelect(value){dispatch({type:'setSelectedBookingWeek',value:value});applyFilters({variables:getFilterVariables(selectedShip.id,selectedSailDate.id,value,selectedProduct.id,selectedItinerary.id,peerGroupFilters,selectedPeerShip,selectedPeerProduct.id,selectedPeerSailingDates[0],selectedPeerSailingDates[1],filter,peerFilter,filterCount)});};useEffect(function(){var onCompleted=function onCompleted(data){if(data.snapshotIntervalList.length){dispatch({type:'setSelectedBookingWeek',value:data.snapshotIntervalList[data.snapshotIntervalList.length-1].interval});}};var onError=function onError(error){return React.createElement(Notification,{type:\"error\",message:error.message});};if(onCompleted||onError){if(onCompleted&&!loading&&!error){onCompleted(data);}else if(onError&&!loading&&error){onError(error);}}},[loading,data,error,dispatch]);var handleStep=function handleStep(dir){var snapshotIntervalList=data.snapshotIntervalList;var getCurrent=function getCurrent(snapshot){return snapshot.interval===selectedBookingWeek;};var index=snapshotIntervalList.findIndex(getCurrent);if(dir==='prev'&&index!==0){var interval=snapshotIntervalList[index-1].interval;dispatch({type:'setSelectedBookingWeek',value:interval});applyFilters({variables:getFilterVariables(selectedShip.id,selectedSailDate.id,interval,selectedProduct.id,selectedItinerary.id,peerGroupFilters,selectedPeerShip,selectedPeerProduct.id,selectedPeerSailingDates[0],selectedPeerSailingDates[1],filter,peerFilter,filterCount)});}if(dir==='next'&&index!==snapshotIntervalList.length-1){var _interval=snapshotIntervalList[index+1].interval;dispatch({type:'setSelectedBookingWeek',value:_interval});applyFilters({variables:getFilterVariables(selectedShip.id,selectedSailDate.id,_interval,selectedProduct.id,selectedItinerary.id,peerGroupFilters,selectedPeerShip,selectedPeerProduct.id,selectedPeerSailingDates[0],selectedPeerSailingDates[1],filter,peerFilter,filterCount)});}};var getWidth=function getWidth(){var snapshotIntervalList=data.snapshotIntervalList;var total=snapshotIntervalList[0].interval;return\"\".concat((1-selectedBookingWeek/total)*100,\"%\");};if(loading)return React.createElement(Loader,null);if(error){return React.createElement(Notification,{type:\"error\",message:error.message});}return Object.entries(shipData).length>0&&React.createElement(Container,null,React.createElement(ChangeInterval,null,React.createElement(StyledIcon,{type:\"caret-left\",onClick:function onClick(){return handleStep('prev');}}),React.createElement(StyledSelect,{style:{width:250},value:selectedBookingWeek,onChange:handleSelect,timeline:true},data.snapshotIntervalList.map(function(snapshot,i){return React.createElement(Option,{value:snapshot.interval,key:'interval'+i},snapshot.intervalLabel+' to departure');})),React.createElement(StyledIcon,{type:\"caret-right\",onClick:function onClick(){return handleStep('next');}})),React.createElement(IntervalMeter,null,React.createElement(IntervalPosition,{width:getWidth()})));};export default Timeline;","map":{"version":3,"sources":["/Users/hanseulshim/Projects/celebrity-ship-viz/src/components/main/filters/timeline/index.js"],"names":["React","useContext","useEffect","useQuery","useLazyQuery","store","styled","Select","Icon","StyledSelect","GET_SNAPSHOT_INTERVAL_LIST","GET_VISUAL_DECK_LIST","getFilterVariables","Loader","Notification","Option","Container","div","ChangeInterval","StyledIcon","props","theme","babyBlue","IntervalMeter","dusk","IntervalPosition","width","Timeline","globalState","state","dispatch","selectedShip","selectedProduct","selectedItinerary","selectedSailDate","selectedBookingWeek","peerGroupFilters","selectedPeerShip","selectedPeerProduct","selectedPeerSailingDates","filter","peerFilter","filterCount","shipData","fetchPolicy","loading","error","data","onCompleted","type","value","deckVisualList","applyFilters","handleSelect","variables","id","snapshotIntervalList","length","interval","onError","message","handleStep","dir","getCurrent","snapshot","index","findIndex","getWidth","total","Object","entries","map","i","intervalLabel"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from 'react'\nimport { useQuery, useLazyQuery } from '@apollo/client'\nimport { store } from 'context/store'\nimport styled from 'styled-components'\nimport { Select, Icon } from 'antd'\nimport { StyledSelect } from 'components/common/StyledComponents'\n\n// GQL\nimport {\n  GET_SNAPSHOT_INTERVAL_LIST,\n  GET_VISUAL_DECK_LIST\n} from 'graphql/queries'\nimport { getFilterVariables } from 'helper'\n// Project Imports\nimport Loader from 'components/common/Loader'\nimport Notification from 'components/common/Notification'\n\nconst { Option } = Select\n\nconst Container = styled.div`\n  flex: 3;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  align-items: center;\n`\n\nconst ChangeInterval = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nconst StyledIcon = styled(Icon)`\n  font-size: 2em;\n\n  > svg {\n    color: ${props => props.theme.babyBlue};\n    cursor: pointer;\n  }\n`\n\nconst IntervalMeter = styled.div`\n  display: flex;\n  position: relative;\n  width: 90%;\n  height: 10px;\n  border-radius: 3px;\n  background-color: ${props => props.theme.dusk};\n`\n\nconst IntervalPosition = styled.div`\n  position: absolute;\n  left: 0;\n  height: 100%;\n  border-radius: 3px;\n  width: ${props => props.width};\n  background-color: ${props => props.theme.babyBlue};\n`\n\nconst Timeline = () => {\n  const globalState = useContext(store)\n  const { state, dispatch } = globalState\n  const {\n    selectedShip,\n    selectedProduct,\n    selectedItinerary,\n    selectedSailDate,\n    selectedBookingWeek,\n    peerGroupFilters,\n    selectedPeerShip,\n    selectedPeerProduct,\n    selectedPeerSailingDates,\n    filter,\n    peerFilter,\n    filterCount,\n    shipData\n  } = state\n\n  const { loading, error, data } = useQuery(GET_SNAPSHOT_INTERVAL_LIST, {\n    fetchPolicy: 'network-only'\n  })\n\n  const [applyFilters] = useLazyQuery(GET_VISUAL_DECK_LIST, {\n    onCompleted: data => {\n      dispatch({ type: 'setShipData', value: data.deckVisualList })\n    },\n    fetchPolicy: 'network-only'\n  })\n\n  const handleSelect = value => {\n    dispatch({ type: 'setSelectedBookingWeek', value })\n\n    applyFilters({\n      variables: getFilterVariables(\n        selectedShip.id,\n        selectedSailDate.id,\n        value,\n        selectedProduct.id,\n        selectedItinerary.id,\n        peerGroupFilters,\n        selectedPeerShip,\n        selectedPeerProduct.id,\n        selectedPeerSailingDates[0],\n        selectedPeerSailingDates[1],\n        filter,\n        peerFilter,\n        filterCount\n      )\n    })\n  }\n\n  useEffect(() => {\n    const onCompleted = data => {\n      if (data.snapshotIntervalList.length) {\n        dispatch({\n          type: 'setSelectedBookingWeek',\n          value:\n            data.snapshotIntervalList[data.snapshotIntervalList.length - 1]\n              .interval\n        })\n      }\n    }\n    const onError = error => {\n      return <Notification type=\"error\" message={error.message} />\n    }\n    if (onCompleted || onError) {\n      if (onCompleted && !loading && !error) {\n        onCompleted(data)\n      } else if (onError && !loading && error) {\n        onError(error)\n      }\n    }\n  }, [loading, data, error, dispatch])\n\n  const handleStep = dir => {\n    const { snapshotIntervalList } = data\n\n    const getCurrent = snapshot => snapshot.interval === selectedBookingWeek\n    const index = snapshotIntervalList.findIndex(getCurrent)\n\n    if (dir === 'prev' && index !== 0) {\n      const interval = snapshotIntervalList[index - 1].interval\n      dispatch({\n        type: 'setSelectedBookingWeek',\n        value: interval\n      })\n\n      applyFilters({\n        variables: getFilterVariables(\n          selectedShip.id,\n          selectedSailDate.id,\n          interval,\n          selectedProduct.id,\n          selectedItinerary.id,\n          peerGroupFilters,\n          selectedPeerShip,\n          selectedPeerProduct.id,\n          selectedPeerSailingDates[0],\n          selectedPeerSailingDates[1],\n          filter,\n          peerFilter,\n          filterCount\n        )\n      })\n    }\n    if (dir === 'next' && index !== snapshotIntervalList.length - 1) {\n      const interval = snapshotIntervalList[index + 1].interval\n      dispatch({\n        type: 'setSelectedBookingWeek',\n        value: interval\n      })\n      applyFilters({\n        variables: getFilterVariables(\n          selectedShip.id,\n          selectedSailDate.id,\n          interval,\n          selectedProduct.id,\n          selectedItinerary.id,\n          peerGroupFilters,\n          selectedPeerShip,\n          selectedPeerProduct.id,\n          selectedPeerSailingDates[0],\n          selectedPeerSailingDates[1],\n          filter,\n          peerFilter,\n          filterCount\n        )\n      })\n    }\n  }\n\n  const getWidth = () => {\n    const { snapshotIntervalList } = data\n    const total = snapshotIntervalList[0].interval\n\n    return `${(1 - selectedBookingWeek / total) * 100}%`\n  }\n\n  if (loading) return <Loader />\n  if (error) {\n    return <Notification type=\"error\" message={error.message} />\n  }\n  return (\n    Object.entries(shipData).length > 0 && (\n      <Container>\n        <ChangeInterval>\n          <StyledIcon type=\"caret-left\" onClick={() => handleStep('prev')} />\n          <StyledSelect\n            style={{ width: 250 }}\n            value={selectedBookingWeek}\n            onChange={handleSelect}\n            timeline\n          >\n            {data.snapshotIntervalList.map((snapshot, i) => (\n              <Option value={snapshot.interval} key={'interval' + i}>\n                {snapshot.intervalLabel + ' to departure'}\n              </Option>\n            ))}\n          </StyledSelect>\n          <StyledIcon type=\"caret-right\" onClick={() => handleStep('next')} />\n        </ChangeInterval>\n        <IntervalMeter>\n          <IntervalPosition width={getWidth()} />\n        </IntervalMeter>\n      </Container>\n    )\n  )\n}\n\nexport default Timeline\n"]},"metadata":{},"sourceType":"module"}